<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Cultivo Arroz - Análisis Integral | Dashboard Profesional</title>
    <meta name="description" content="Dashboard ejecutivo profesional para análisis integral del sistema de cultivo de arroz. Consultoría empresarial con datos reales MySQL.">
    <meta name="keywords" content="análisis datos, cultivo arroz, dashboard, business intelligence, consultoría">
    
    <!-- Plotly.js CDN -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"></script>
    
    <!-- Plotly Configuration -->
    <script>
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {
            window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});
        }
    </script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

<style>
/* Reset y Base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
    font-size: 16px;
}

body {
    font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    font-feature-settings: 'rlig' 1, 'calt' 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.6;
    color: #1f2937;
    background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
    min-height: 100vh;
}

/* Variables CSS */
:root {
    --color-primary: #2E7D32;
    --color-secondary: #66BB6A;
    --color-accent: #FFA000;
    --color-success: #388E3C;
    --color-warning: #F57C00;
    --color-danger: #D32F2F;
    --color-neutral: #616161;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    --radius-xl: 1rem;
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;
}

/* Layout Containers */
.container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1rem;
}

.container-fluid {
    max-width: 100%;
    padding: 0 1rem;
}

/* Grid System */
.grid {
    display: grid;
}

.grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

.gap-4 { gap: 1rem; }
.gap-6 { gap: 1.5rem; }
.gap-8 { gap: 2rem; }

/* Flexbox */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-row { flex-direction: row; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.space-x-1 > * + * { margin-left: 0.25rem; }
.space-x-2 > * + * { margin-left: 0.5rem; }
.space-x-3 > * + * { margin-left: 0.75rem; }
.space-y-2 > * + * { margin-top: 0.5rem; }
.space-y-3 > * + * { margin-top: 0.75rem; }
.space-y-4 > * + * { margin-top: 1rem; }

/* Positioning */
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }
.top-0 { top: 0; }
.z-50 { z-index: 50; }

/* Sizing */
.w-4 { width: 1rem; }
.w-5 { width: 1.25rem; }
.w-6 { width: 1.5rem; }
.w-10 { width: 2.5rem; }
.w-full { width: 100%; }
.h-4 { height: 1rem; }
.h-5 { height: 1.25rem; }
.h-6 { height: 1.5rem; }
.h-10 { height: 2.5rem; }
.h-16 { height: 4rem; }
.min-h-screen { min-height: 100vh; }

/* Spacing */
.p-2 { padding: 0.5rem; }
.p-4 { padding: 1rem; }
.p-6 { padding: 1.5rem; }
.p-8 { padding: 2rem; }
.px-4 { padding-left: 1rem; padding-right: 1rem; }
.px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
.px-8 { padding-left: 2rem; padding-right: 2rem; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
.py-4 { padding-top: 1rem; padding-bottom: 1rem; }
.py-12 { padding-top: 3rem; padding-bottom: 3rem; }
.py-20 { padding-top: 5rem; padding-bottom: 5rem; }
.mb-4 { margin-bottom: 1rem; }
.mb-6 { margin-bottom: 1.5rem; }
.mb-8 { margin-bottom: 2rem; }
.mb-12 { margin-bottom: 3rem; }
.mb-20 { margin-bottom: 5rem; }
.mt-8 { margin-top: 2rem; }
.mt-12 { margin-top: 3rem; }

/* Colors y Backgrounds */
.bg-white { background-color: #ffffff; }
.bg-gray-50 { background-color: #f9fafb; }
.bg-gray-100 { background-color: #f3f4f6; }
.bg-gray-200 { background-color: #e5e7eb; }
.bg-gray-600 { background-color: #4b5563; }
.bg-gray-900 { background-color: #111827; }
.bg-green-50 { background-color: #f0fdf4; }
.bg-green-100 { background-color: #dcfce7; }
.bg-green-500 { background-color: #22c55e; }
.bg-green-600 { background-color: #16a34a; }
.bg-green-700 { background-color: #15803d; }

.bg-gradient-to-br { background-image: linear-gradient(to bottom right, var(--tw-gradient-stops)); }
.bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
.from-gray-50 { --tw-gradient-from: #f9fafb; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(249, 250, 251, 0)); }
.to-gray-100 { --tw-gradient-to: #f3f4f6; }
.from-green-700 { --tw-gradient-from: #15803d; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(21, 128, 61, 0)); }
.via-green-600 { --tw-gradient-stops: var(--tw-gradient-from), #16a34a, var(--tw-gradient-to, rgba(22, 163, 74, 0)); }
.to-green-500 { --tw-gradient-to: #22c55e; }

/* Text Colors */
.text-white { color: #ffffff; }
.text-gray-600 { color: #4b5563; }
.text-gray-700 { color: #374151; }
.text-gray-900 { color: #111827; }
.text-green-100 { color: #dcfce7; }
.text-green-600 { color: #16a34a; }
.text-green-700 { color: #15803d; }
.text-yellow-300 { color: #fde047; }

/* Typography */
.text-xs { font-size: 0.75rem; line-height: 1rem; }
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-base { font-size: 1rem; line-height: 1.5rem; }
.text-lg { font-size: 1.125rem; line-height: 1.75rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }
.text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
.text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
.text-6xl { font-size: 3.75rem; line-height: 1; }

.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

.text-center { text-align: center; }
.text-left { text-align: left; }

/* Borders y Rounded */
.border { border-width: 1px; }
.border-gray-200 { border-color: #e5e7eb; }
.border-gray-700 { border-color: #374151; }
.border-white { border-color: #ffffff; }
.border-t { border-top-width: 1px; }
.border-b { border-bottom-width: 1px; }

.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-2xl { border-radius: 1rem; }

/* Shadows */
.shadow-sm { box-shadow: var(--shadow-sm); }
.shadow-lg { box-shadow: var(--shadow-lg); }
.shadow-xl { box-shadow: var(--shadow-xl); }

/* Effects */
.backdrop-blur-lg { backdrop-filter: blur(16px); }
.backdrop-blur-sm { backdrop-filter: blur(4px); }

/* Transitions */
.transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
.transition-colors { transition-property: color, background-color, border-color; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
.duration-200 { transition-duration: 200ms; }
.duration-300 { transition-duration: 300ms; }

/* Hover Effects */
.hover\:text-green-700:hover { color: #15803d; }
.hover\:bg-green-50:hover { background-color: #f0fdf4; }
.hover\:shadow-xl:hover { box-shadow: var(--shadow-xl); }
.hover\:shadow-2xl:hover { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
.hover\:-translate-y-1:hover { transform: translateY(-0.25rem); }

/* Display */
.hidden { display: none; }
.block { display: block; }
.inline-block { display: inline-block; }
.inline-flex { display: inline-flex; }

/* Header Específico */
.header {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(16px);
    box-shadow: var(--shadow-lg);
    position: sticky;
    top: 0;
    z-index: 50;
    border-bottom: 1px solid #e5e7eb;
}

.header-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1rem;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 4rem;
}

.logo-container {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.logo-icon {
    width: 2.5rem;
    height: 2.5rem;
    background: linear-gradient(135deg, #16a34a, #15803d);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
}

.logo-text {
    font-size: 1.25rem;
    font-weight: 700;
    background: linear-gradient(to right, #15803d, #16a34a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.logo-subtitle {
    font-size: 0.875rem;
    color: #4b5563;
}

/* Navigation */
.nav-desktop {
    display: none;
    gap: 0.25rem;
}

.nav-button {
    padding: 0.5rem 1rem;
    border-radius: var(--radius-lg);
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 200ms;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border: none;
    background: none;
    cursor: pointer;
    text-decoration: none;
}

.nav-button.active {
    background-color: #dcfce7;
    color: #15803d;
    box-shadow: var(--shadow-sm);
}

.nav-button:not(.active) {
    color: #4b5563;
}

.nav-button:not(.active):hover {
    color: #15803d;
    background-color: #f0fdf4;
}

.nav-label {
    display: none;
}

.mobile-menu-button {
    padding: 0.5rem;
    border-radius: var(--radius-lg);
    color: #4b5563;
    background: none;
    border: none;
    cursor: pointer;
    transition: colors 150ms;
}

.mobile-menu-button:hover {
    color: #15803d;
    background-color: #f0fdf4;
}

.mobile-nav {
    padding: 1rem 0;
    border-top: 1px solid #e5e7eb;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(16px);
}

.mobile-nav-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.mobile-nav-button {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border-radius: var(--radius-lg);
    text-align: left;
    transition: all 200ms;
    background: none;
    border: none;
    cursor: pointer;
    text-decoration: none;
}

.mobile-nav-button.active {
    background-color: #dcfce7;
    color: #15803d;
}

.mobile-nav-button:not(.active) {
    color: #4b5563;
}

.mobile-nav-button:not(.active):hover {
    color: #15803d;
    background-color: #f0fdf4;
}

/* Hero Section */
.hero {
    background: linear-gradient(to right, #15803d, #16a34a, #22c55e);
    color: white;
    padding: 5rem 0;
}

.hero-title {
    font-size: 2.25rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-align: center;
}

.hero-subtitle {
    font-size: 1.25rem;
    margin-bottom: 2rem;
    color: #dcfce7;
    text-align: center;
}

.hero-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-top: 3rem;
}

.hero-stat-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(16px);
    border-radius: var(--radius-xl);
    padding: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    text-align: center;
}

.hero-stat-value {
    font-size: 1.875rem;
    font-weight: 700;
    color: #fde047;
}

.hero-stat-label {
    font-size: 0.875rem;
    color: #dcfce7;
}

/* Main Content */
.main-content {
    max-width: 1280px;
    margin: 0 auto;
    padding: 3rem 1rem;
}

/* Sections */
.section {
    margin-bottom: 5rem;
}

.section-header {
    margin-bottom: 2rem;
}

.section-title {
    font-size: 1.875rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 1rem;
}

.section-description {
    font-size: 1.125rem;
    color: #4b5563;
}

/* Chart Cards */
.chart-card {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(4px);
    border-radius: 1rem;
    box-shadow: var(--shadow-xl);
    border: 1px solid #e5e7eb;
    padding: 2rem;
    transition: all 300ms;
}

.chart-card:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    background: rgba(255, 255, 255, 0.8);
    transform: translateY(-2px);
}

/* Plotly Charts */
.js-plotly-plot, .plotly-graph-div {
    width: 100% !important;
    height: auto !important;
    border-radius: 12px !important;
    overflow: hidden !important;
}

/* Conclusions Section */
.conclusions-card {
    background: linear-gradient(to right, #15803d, #16a34a);
    border-radius: 1rem;
    box-shadow: var(--shadow-xl);
    color: white;
    padding: 2rem;
}

.conclusions-title {
    font-size: 1.875rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
}

.conclusions-subtitle {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #fde047;
}

.conclusions-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.conclusions-item {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    color: #dcfce7;
}

.metric-box {
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-lg);
    padding: 1rem;
    backdrop-filter: blur(4px);
}

.metric-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.metric-item {
    font-size: 0.875rem;
}

.metric-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: #fde047;
}

.metric-label {
    color: #d1d5db;
}

/* Footer */
.footer {
    background-color: #111827;
    color: white;
    padding: 3rem 0;
}

.footer-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    text-align: center;
}

.footer-grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: 1.5rem;
    color: #d1d5db;
    text-align: center;
}

.footer-item {
    font-weight: 700;
    color: white;
}

.footer-conclusion {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid #374151;
    text-align: center;
}

.footer-conclusion-text {
    font-size: 1.125rem;
    font-weight: 600;
    color: #fde047;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, #2E7D32, #66BB6A);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, #1B5E20, #4CAF50);
}

/* Loading Animation */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in {
    animation: fadeIn 0.6s ease-out forwards;
}

/* Responsive Design */
@media (min-width: 768px) {
    .md\:block { display: block; }
    .md\:hidden { display: none; }
    .md\:flex { display: flex; }
    .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
    .md\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
    .md\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .md\:text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
    .md\:text-6xl { font-size: 3.75rem; line-height: 1; }
    
    .nav-desktop {
        display: flex;
    }
    
    .nav-label {
        display: block;
    }
    
    .mobile-menu-button {
        display: none;
    }
    
    .hero-title {
        font-size: 3.75rem;
    }
    
    .hero-subtitle {
        font-size: 1.5rem;
    }
    
    .hero-stats {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .footer-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (min-width: 1024px) {
    .lg\:px-8 { padding-left: 2rem; padding-right: 2rem; }
    
    .container {
        padding: 0 2rem;
    }
}

/* Print Styles */
@media print {
    .no-print {
        display: none !important;
    }
    
    .chart-card {
        box-shadow: none;
        border: 1px solid #d1d5db;
        break-inside: avoid;
    }
    
    .section {
        break-inside: avoid;
    }
}

/* Performance Optimizations */
.chart-container {
    contain: layout style paint;
    will-change: transform;
}

/* Accessibility */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

button:focus,
a:focus {
    outline: 2px solid #22c55e;
    outline-offset: 2px;
}

/* Custom Components */
.icon {
    width: 1rem;
    height: 1rem;
    stroke: currentColor;
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.icon-lg {
    width: 1.5rem;
    height: 1.5rem;
}

/* Specific Chart Enhancements */
.plotly-graph-div {
    border-radius: 12px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.9);
}

.plotly-graph-div .main-svg {
    border-radius: 12px;
}

/* Mobile Specific */
@media (max-width: 767px) {
    .hero-title {
        font-size: 2.25rem;
        line-height: 2.5rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
    
    .chart-card {
        padding: 1rem;
    }
    
    .container {
        padding: 0 0.5rem;
    }
}

/* Additional Professional Enhancements */
.professional-card {
    position: relative;
    overflow: hidden;
}

.professional-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(to right, #2E7D32, #66BB6A, #FFA000);
}

.glass-effect {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.18);
}

.text-gradient {
    background: linear-gradient(135deg, #2E7D32, #66BB6A);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Animation Keyframes */
@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-up {
    animation: slideUp 0.6s ease-out forwards;
}

/* Enhanced Focus States */
.focus-ring:focus {
    outline: none;
    box-shadow: 0 0 0 2px #22c55e, 0 0 0 4px rgba(34, 197, 94, 0.1);
}
</style>
</head>

<body>
    <!-- Header -->
    <header class="header no-print">
        <div class="header-container">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo-icon">
                        <i data-lucide="bar-chart-3" class="icon text-white"></i>
                    </div>
                    <div>
                        <h1 class="logo-text">Sistema Cultivo Arroz</h1>
                        <p class="logo-subtitle">Análisis Integral 2024</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="nav-desktop">
                    <button onclick="scrollToSection('resumen')" class="nav-button focus-ring" id="nav-resumen">
                        <i data-lucide="bar-chart-3" class="icon"></i>
                        <span class="nav-label">Resumen Ejecutivo</span>
                    </button>
                    <button onclick="scrollToSection('financiero')" class="nav-button focus-ring" id="nav-financiero">
                        <i data-lucide="trending-up" class="icon"></i>
                        <span class="nav-label">Análisis Financiero</span>
                    </button>
                    <button onclick="scrollToSection('empleados')" class="nav-button focus-ring" id="nav-empleados">
                        <i data-lucide="users" class="icon"></i>
                        <span class="nav-label">Capital Humano</span>
                    </button>
                    <button onclick="scrollToSection('territorial')" class="nav-button focus-ring" id="nav-territorial">
                        <i data-lucide="map-pin" class="icon"></i>
                        <span class="nav-label">Análisis Territorial</span>
                    </button>
                    <button onclick="scrollToSection('temporal')" class="nav-button focus-ring" id="nav-temporal">
                        <i data-lucide="calendar" class="icon"></i>
                        <span class="nav-label">Tendencias</span>
                    </button>
                    <button onclick="scrollToSection('operacional')" class="nav-button focus-ring" id="nav-operacional">
                        <i data-lucide="target" class="icon"></i>
                        <span class="nav-label">Operaciones</span>
                    </button>
                </nav>

                <!-- Mobile Menu Button -->
                <button onclick="toggleMobileMenu()" class="mobile-menu-button focus-ring md:hidden">
                    <i data-lucide="menu" class="icon" id="menu-icon"></i>
                    <i data-lucide="x" class="icon hidden" id="close-icon"></i>
                </button>
            </div>

            <!-- Mobile Navigation -->
            <div class="mobile-nav hidden" id="mobile-nav">
                <nav class="mobile-nav-content">
                    <button onclick="scrollToSection('resumen')" class="mobile-nav-button focus-ring">
                        <i data-lucide="bar-chart-3" class="icon-lg"></i>
                        <span class="font-medium">Resumen Ejecutivo</span>
                    </button>
                    <button onclick="scrollToSection('financiero')" class="mobile-nav-button focus-ring">
                        <i data-lucide="trending-up" class="icon-lg"></i>
                        <span class="font-medium">Análisis Financiero</span>
                    </button>
                    <button onclick="scrollToSection('empleados')" class="mobile-nav-button focus-ring">
                        <i data-lucide="users" class="icon-lg"></i>
                        <span class="font-medium">Capital Humano</span>
                    </button>
                    <button onclick="scrollToSection('territorial')" class="mobile-nav-button focus-ring">
                        <i data-lucide="map-pin" class="icon-lg"></i>
                        <span class="font-medium">Análisis Territorial</span>
                    </button>
                    <button onclick="scrollToSection('temporal')" class="mobile-nav-button focus-ring">
                        <i data-lucide="calendar" class="icon-lg"></i>
                        <span class="font-medium">Tendencias</span>
                    </button>
                    <button onclick="scrollToSection('operacional')" class="mobile-nav-button focus-ring">
                        <i data-lucide="target" class="icon-lg"></i>
                        <span class="font-medium">Operaciones</span>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 class="hero-title fade-in">
                🌾 Análisis Integral
                <br>
                <span class="text-yellow-300">Sistema Cultivo Arroz</span>
            </h1>
            <p class="hero-subtitle fade-in">
                Dashboard Ejecutivo 
            </p>
            <div class="hero-stats fade-in">
                <div class="hero-stat-card">
                    <div class="hero-stat-value">-5.58%</div>
                    <div class="hero-stat-label">ROI General</div>
                </div>
                <div class="hero-stat-card">
                    <div class="hero-stat-value">72.7%</div>
                    <div class="hero-stat-label">Eficiencia</div>
                </div>
                <div class="hero-stat-card">
                    <div class="hero-stat-value">28.5</div>
                    <div class="hero-stat-label">Torvadas</div>
                </div>
                <div class="hero-stat-card">
                    <div class="hero-stat-value">100%</div>
                    <div class="hero-stat-label">Calidad</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        
        <!-- Resumen Ejecutivo -->
        <section id="resumen" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">📊 Resumen Ejecutivo KPIs</h2>
                <p class="section-description">
                    Dashboard gerencial con indicadores clave para toma de decisiones estratégicas
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="dashboard-kpis" style="min-height: 700px;">
                    <div id="4b15047b-fe91-402e-a4a6-9aca32978dc8" style="height: 700px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Análisis Financiero -->
        <section id="financiero" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">💰 Análisis Financiero Detallado</h2>
                <p class="section-description">
                    Rentabilidad por actividad y control presupuestario
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="analisis-financiero" style="min-height: 800px;">
                    <div id="45ac3e52-41fd-4f6c-9b61-f04cb60ca44d" style="height: 800px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Capital Humano -->
        <section id="empleados" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">👥 Análisis de Capital Humano</h2>
                <p class="section-description">
                    Ranking de eficiencia, especialización y retorno por empleado
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="productividad-empleados" style="min-height: 900px;">
                    <div id="ccaeacf3-605f-4087-ab46-e5c0d804c23c" style="height: 900px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Análisis Territorial -->
        <section id="territorial" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">🗺️ Análisis Territorial</h2>
                <p class="section-description">
                    Heatmap de rentabilidad, tipos de suelo y distribución geográfica
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="rendimiento-areas" style="min-height: 900px;">
                    <div id="c5702d3c-d555-4efe-bb9e-54e361d72886" style="height: 900px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Tendencias Temporales -->
        <section id="temporal" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">📅 Tendencias Temporales</h2>
                <p class="section-description">
                    Análisis estacional y patrones temporales
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="tendencias-temporales" style="min-height: 900px;">
                    <div id="fc358335-d136-46f2-a7b6-b9ca871bd01e" style="height: 900px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Análisis Operacional -->
        <section id="operacional" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">⚙️ Análisis Operacional</h2>
                <p class="section-description">
                    Estados de tareas, distribución de prioridades y control operacional
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="analisis-operacional" style="min-height: 900px;">
                    <div id="0a5344f3-6ccb-4a26-8f56-c6b442641c31" style="height: 900px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Recomendaciones -->
        <section id="recomendaciones" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">💡 Recomendaciones Estratégicas</h2>
                <p class="section-description">
                    Plan de acción ejecutivo basado en datos
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="plan-accion" style="min-height: 400px;">
                    <div id="37a6bc22-f115-4d11-b500-1fab0ec14a8d" style="height: 400px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Proyecciones -->
        <section id="proyecciones" class="section slide-up">
            <div class="section-header">
                <h2 class="section-title">📈 Proyecciones 2025</h2>
                <p class="section-description">
                    Escenarios futuros y plan de implementación
                </p>
            </div>
            
            <div class="chart-card professional-card">
                <div id="proyecciones-2025" style="min-height: 900px;">
                    <div id="db60d1f2-ae3a-4025-a54e-9db43dbce761" style="height: 900px; width: 100%;" class="plotly-graph-div"></div>
                </div>
            </div>
        </section>

        <!-- Conclusiones -->
        <section id="conclusiones" class="section slide-up">
            <div class="conclusions-card">
                <h2 class="conclusions-title">🏁 Conclusiones Ejecutivas</h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="conclusions-subtitle">🎯 Hallazgos Críticos</h3>
                        <ul class="conclusions-list">
                            <li class="conclusions-item">
                                <span style="color: #fca5a5;">🚨</span>
                                <span>ROI Negativo: -5.58% requiere acción inmediata</span>
                            </li>
                            <li class="conclusions-item">
                                <span style="color: #fde047;">⚡</span>
                                <span>Charlie López: Top performer (100% eficiencia)</span>
                            </li>
                            <li class="conclusions-item">
                                <span style="color: #86efac;">🌱</span>
                                <span>Campo Sur: Única área rentable (+25% ROI)</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="conclusions-subtitle">📈 Proyección de Impacto</h3>
                        <div class="metric-box">
                            <div class="metric-grid">
                                <div class="metric-item">
                                    <span class="metric-label">ROI Proyectado:</span>
                                    <div class="metric-value">+15%</div>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Eficiencia Meta:</span>
                                    <div class="metric-value">90%</div>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Productividad:</span>
                                    <div class="metric-value">50 torvadas</div>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">ROI Plan:</span>
                                    <div class="metric-value">75%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <h3 class="footer-title">🏆 Certificación de Análisis</h3>
            <div class="footer-grid">
                <div>
                    <div class="footer-item">Analista:</div>
                    Samir Caizapasto
                </div>
                <div>
                    <div class="footer-item">Período:</div>
                    Enero - Julio 2024
                </div>
                <div>
                    <div class="footer-item">Datos:</div>
                    Proyecto Universitario MySQL
                </div>
            </div>
            <div class="footer-conclusion">
                <p class="footer-conclusion-text">
                    🌟 Proyecto para mostrar habilidades en  Data Analytics & Full Stack Development
                </p>
            </div>
        </div>
    </footer>

<!-- JavaScript -->
<script>
// Variables globales
let activeSection = 'resumen';
let isMenuOpen = false;

// Navigation functions
function scrollToSection(sectionId) {
    activeSection = sectionId;
    const element = document.getElementById(sectionId);
    if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
    }
    closeMobileMenu();
    updateActiveNavigation();
}

function toggleMobileMenu() {
    isMenuOpen = !isMenuOpen;
    const mobileNav = document.getElementById('mobile-nav');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    
    if (isMenuOpen) {
        mobileNav.classList.remove('hidden');
        menuIcon.classList.add('hidden');
        closeIcon.classList.remove('hidden');
    } else {
        mobileNav.classList.add('hidden');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
    }
}

function closeMobileMenu() {
    isMenuOpen = false;
    const mobileNav = document.getElementById('mobile-nav');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    
    mobileNav.classList.add('hidden');
    menuIcon.classList.remove('hidden');
    closeIcon.classList.add('hidden');
}

function updateActiveNavigation() {
    // Update desktop nav
    const navButtons = document.querySelectorAll('.nav-button');
    navButtons.forEach(button => {
        button.classList.remove('active');
    });
    
    const activeButton = document.getElementById(`nav-${activeSection}`);
    if (activeButton) {
        activeButton.classList.add('active');
    }
    
    // Update mobile nav
    const mobileNavButtons = document.querySelectorAll('.mobile-nav-button');
    mobileNavButtons.forEach((button, index) => {
        button.classList.remove('active');
        const sections = ['resumen', 'financiero', 'empleados', 'territorial', 'temporal', 'operacional'];
        if (sections[index] === activeSection) {
            button.classList.add('active');
        }
    });
}

// Scroll spy
function handleScroll() {
    const sections = ['resumen', 'financiero', 'empleados', 'territorial', 'temporal', 'operacional'];
    
    for (const sectionId of sections) {
        const element = document.getElementById(sectionId);
        if (element) {
            const rect = element.getBoundingClientRect();
            if (rect.top <= 100 && rect.bottom >= 100) {
                if (activeSection !== sectionId) {
                    activeSection = sectionId;
                    updateActiveNavigation();
                }
                break;
            }
        }
    }
}

// Initialize Plotly charts
function initializePlotlyCharts() {
    if (typeof Plotly === 'undefined') {
        console.log('Esperando Plotly...');
        setTimeout(initializePlotlyCharts, 100);
        return;
    }

    console.log('Inicializando gráficos Plotly...');

    // Chart 1: Dashboard KPIs
    if (document.getElementById("4b15047b-fe91-402e-a4a6-9aca32978dc8")) {
        Plotly.newPlot(
            "4b15047b-fe91-402e-a4a6-9aca32978dc8",
            [
                {"delta":{"position":"top","reference":15},"domain":{"x":[0.0,0.45],"y":[0.625,1.0]},"gauge":{"axis":{"range":[-20,30]},"bar":{"color":"#D32F2F"},"steps":[{"color":"red","range":[-20,0]},{"color":"lightgray","range":[0,10]},{"color":"yellow","range":[10,20]},{"color":"green","range":[20,30]}],"threshold":{"line":{"color":"red","width":4},"thickness":0.75,"value":0}},"mode":"gauge+number+delta","title":{"text":"ROI General %"},"value":-5.58,"type":"indicator"},
                {"delta":{"position":"top","reference":90},"domain":{"x":[0.55,1.0],"y":[0.625,1.0]},"gauge":{"axis":{"range":[null,100]},"bar":{"color":"#F57C00"},"steps":[{"color":"red","range":[0,60]},{"color":"yellow","range":[60,80]},{"color":"green","range":[80,100]}]},"mode":"gauge+number+delta","title":{"text":"Eficiencia %"},"value":72.7,"type":"indicator"},
                {"delta":{"position":"top","reference":50},"domain":{"x":[0.0,0.45],"y":[0.0,0.375]},"gauge":{"axis":{"range":[null,100]},"bar":{"color":"#2E7D32"},"steps":[{"color":"lightgray","range":[0,20]},{"color":"yellow","range":[20,50]},{"color":"green","range":[50,100]}]},"mode":"gauge+number+delta","title":{"text":"Torvadas Totales"},"value":28.5,"type":"indicator"},
                {"domain":{"x":[0.55,1.0],"y":[0.0,0.375]},"gauge":{"axis":{"range":[null,100]},"bar":{"color":"#388E3C"},"steps":[{"color":"red","range":[0,70]},{"color":"yellow","range":[70,90]},{"color":"green","range":[90,100]}]},"mode":"gauge+number","title":{"text":"Calidad Primera %"},"value":100.0,"type":"indicator"}
            ],
            {
                "title": {
                    "font": {"size": 24, "color": "#2E7D32"},
                    "text": "🎯 Dashboard Ejecutivo - KPIs Críticos Sistema Cultivo Arroz",
                    "x": 0.5
                },
                "font": {"color": "#616161"},
                "height": 700,
                "paper_bgcolor": "rgba(255,255,255,0.9)",
                "annotations": [
                    {"font":{"size":16},"showarrow":false,"text":"💰 FINANZAS - ROI General","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"⚙️ OPERACIONES - Eficiencia","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"📈 PRODUCTIVIDAD - Output","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"🏆 CALIDAD - Estándares","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ]
            },
            {"responsive": true}
        );
    }

    // Chart 2: Financial Analysis  
    if (document.getElementById("45ac3e52-41fd-4f6c-9b61-f04cb60ca44d")) {
        Plotly.newPlot(
            "45ac3e52-41fd-4f6c-9b61-f04cb60ca44d",
            [
                {"marker":{"color":["#2E8B57","#4682B4","#CD853F","#FFD700"]},"name":"Inversión Total","text":["$15000","$8000","$12000","$5000"],"textposition":"auto","x":["Preparación","Siembra","Mantenimiento","Cosecha"],"y":[15000,8000,12000,5000],"type":"bar","xaxis":"x","yaxis":"y"},
                {"marker":{"color":["#DC143C","#DC143C","#DC143C","#32CD32"]},"name":"ROI %","text":["-100.0%","-100.0%","-100.0%","800.0%"],"textposition":"auto","x":["Preparación","Siembra","Mantenimiento","Cosecha"],"y":[-100,-100,-100,800],"type":"bar","xaxis":"x2","yaxis":"y2"},
                {"line":{"color":"#4682B4","width":3},"marker":{"color":"#4682B4","size":12},"mode":"markers+lines","name":"Costo/Hora","text":["$18.75/h","$16.67/h","$20.00/h","$12.50/h"],"textposition":"top center","x":["Preparación","Siembra","Mantenimiento","Cosecha"],"y":[18.75,16.67,20.00,12.50],"type":"scatter","xaxis":"x3","yaxis":"y3"},
                {"marker":{"color":["#DC143C","#32CD32","#DC143C","#32CD32"]},"name":"Desviación %","text":["5.0%","-2.0%","8.0%","-3.0%"],"textposition":"auto","x":["Preparación","Siembra","Mantenimiento","Cosecha"],"y":[5,-2,8,-3],"type":"bar","xaxis":"x4","yaxis":"y4"}
            ],
            {
                "xaxis":{"anchor":"y","domain":[0.0,0.45]},
                "yaxis":{"anchor":"x","domain":[0.625,1.0]},
                "xaxis2":{"anchor":"y2","domain":[0.55,1.0]},
                "yaxis2":{"anchor":"x2","domain":[0.625,1.0]},
                "xaxis3":{"anchor":"y3","domain":[0.0,0.45]},
                "yaxis3":{"anchor":"x3","domain":[0.0,0.375]},
                "xaxis4":{"anchor":"y4","domain":[0.55,1.0]},
                "yaxis4":{"anchor":"x4","domain":[0.0,0.375]},
                "annotations":[
                    {"font":{"size":16},"showarrow":false,"text":"Inversión Total por Actividad ($)","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"ROI por Tipo de Actividad (%)","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Costo Promedio por Hora","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Control Presupuestario","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ],
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"💰 Análisis Financiero Integral - Rentabilidad y Control Presupuestario","x":0.5},
                "height":800,
                "showlegend":false,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    // Chart 3: Employee Productivity
    if (document.getElementById("ccaeacf3-605f-4087-ab46-e5c0d804c23c")) {
        Plotly.newPlot(
            "ccaeacf3-605f-4087-ab46-e5c0d804c23c",
            [
                {"marker":{"color":["#32CD32","#32CD32","#32CD32","#32CD32","#FFD700","#DC143C"]},"name":"Eficiencia %","orientation":"h","text":["100.0%","100.0%","100.0%","100.0%","66.7%","0.0%"],"textposition":"auto","x":[100.0,100.0,100.0,100.0,66.67,0.0],"y":["Charlie López","Bob Martínez","Kevin Mejía","Eve Rodríguez","David García","Ana Torres"],"type":"bar","xaxis":"x","yaxis":"y"},
                {"marker":{"color":"#4682B4"},"name":"ROI Empleado %","text":["702.5%","712.0%","123.6%","187.9%","194.5%"],"textposition":"auto","x":["Charlie López","Bob Martínez","Kevin Mejía","Eve Rodríguez","David García"],"y":[702.5,712.04,123.64,187.88,194.5],"type":"bar","xaxis":"x2","yaxis":"y2"},
                {"marker":{"color":[100.0,100.0,100.0,100.0,66.67,0.0],"colorbar":{"title":{"text":"Eficiencia %"}},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"showscale":true,"size":[20,18,64,22,17,19]},"mode":"markers+text","name":"Productividad","text":["Charlie","Bob","Kevin","Eve","David","Ana"],"textposition":"top center","x":[8.0,24.0,44.0,36.0,15.5,0.0],"y":[2,3,2,1,2,0],"type":"scatter","xaxis":"x3","yaxis":"y3"},
                {"marker":{"color":"#2E8B57"},"name":"Costo por Especialidad","text":["$20","$99","$0","$33","$54","$192"],"textposition":"auto","x":["Aplicacion","Cosecha","General","Riego","Sembrado","Supervisor"],"y":[20.0,99.0,0.0,33.0,54.0,192.0],"type":"bar","xaxis":"x4","yaxis":"y4"}
            ],
            {
                "xaxis":{"anchor":"y","domain":[0.0,0.45],"title":{"text":"Eficiencia %"}},
                "yaxis":{"anchor":"x","domain":[0.625,1.0]},
                "xaxis2":{"anchor":"y2","domain":[0.55,1.0]},
                "yaxis2":{"anchor":"x2","domain":[0.625,1.0]},
                "xaxis3":{"anchor":"y3","domain":[0.0,0.45],"title":{"text":"Horas Trabajadas"}},
                "yaxis3":{"anchor":"x3","domain":[0.0,0.375],"title":{"text":"Tareas Completadas"}},
                "xaxis4":{"anchor":"y4","domain":[0.55,1.0]},
                "yaxis4":{"anchor":"x4","domain":[0.0,0.375]},
                "annotations":[
                    {"font":{"size":16},"showarrow":false,"text":"Ranking Eficiencia por Empleado","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"ROI por Empleado (%)","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Distribución Horas vs Tareas Completadas","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Especialización y Costo Mano de Obra","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ],
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"👥 Análisis Integral Productividad Empleados - Capital Humano","x":0.5},
                "height":900,
                "showlegend":false,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    // Chart 4: Territorial Analysis
    if (document.getElementById("c5702d3c-d555-4efe-bb9e-54e361d72886")) {
        Plotly.newPlot(
            "c5702d3c-d555-4efe-bb9e-54e361d72886",
            [
                {"marker":{"color":["#32CD32","#32CD32","#DC143C"]},"name":"ROI Area","text":["25%","8%","-12%"],"textposition":"auto","x":["Sector Norte","Sector Sur","Sector Este"],"y":[25,8,-12],"type":"bar","xaxis":"x","yaxis":"y"},
                {"marker":{"color":[25,8,-12],"colorbar":{"title":{"text":"ROI %"}},"colorscale":[[0.0,"rgb(165,0,38)"],[0.1,"rgb(215,48,39)"],[0.2,"rgb(244,109,67)"],[0.3,"rgb(253,174,97)"],[0.4,"rgb(254,224,139)"],[0.5,"rgb(255,255,191)"],[0.6,"rgb(217,239,139)"],[0.7,"rgb(166,217,106)"],[0.8,"rgb(102,189,99)"],[0.9,"rgb(26,152,80)"],[1.0,"rgb(0,104,55)"]],"showscale":true,"size":[15,9,6]},"mode":"markers+text","name":"Inversión vs Ingresos","text":["Sector Norte","Sector Sur","Sector Este"],"textposition":"top center","x":[20000,12000,8000],"y":[25000,13000,7000],"type":"scatter","xaxis":"x2","yaxis":"y2"},
                {"labels":["Arcilloso","Franco","Arenoso"],"marker":{"colors":["#2E8B57","#4682B4","#CD853F"]},"name":"Tipo Suelo","values":[1,1,1],"type":"pie","domain":{"x":[0.0,0.45],"y":[0.0,0.375]}},
                {"marker":{"color":"#32CD32","size":15},"mode":"markers+text","name":"Productividad","text":["Sector Norte","Sector Sur"],"textposition":"top center","x":[5,3],"y":[80,45],"type":"scatter","xaxis":"x3","yaxis":"y3"}
            ],
            {
                "xaxis":{"anchor":"y","domain":[0.0,0.45]},
                "yaxis":{"anchor":"x","domain":[0.625,1.0]},
                "xaxis2":{"anchor":"y2","domain":[0.55,1.0],"title":{"text":"Inversión ($)"}},
                "yaxis2":{"anchor":"x2","domain":[0.625,1.0],"title":{"text":"Ingresos ($)"}},
                "xaxis3":{"anchor":"y3","domain":[0.55,1.0],"title":{"text":"Hectáreas"}},
                "yaxis3":{"anchor":"x3","domain":[0.0,0.375],"title":{"text":"Torvadas"}},
                "annotations":[
                    {"font":{"size":16},"showarrow":false,"text":"ROI por Área Productiva (%)","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Inversión vs Ingresos por Ubicación","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Distribución por Tipo de Suelo","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Hectáreas vs Productividad (Torvadas)","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ],
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"🗺️ Análisis Territorial Integral - Rentabilidad Geográfica","x":0.5},
                "height":900,
                "showlegend":false,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    // Chart 5: Temporal Trends
    if (document.getElementById("fc358335-d136-46f2-a7b6-b9ca871bd01e")) {
        Plotly.newPlot(
            "fc358335-d136-46f2-a7b6-b9ca871bd01e",
            [
                {"line":{"width":3},"mode":"lines+markers","name":"Preparacion","x":[1,2,11,12],"y":[8,12,10,6],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"line":{"width":3},"mode":"lines+markers","name":"Siembra","x":[3,4],"y":[15,18],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"line":{"width":3},"mode":"lines+markers","name":"Mantenimiento","x":[5,6,7,8],"y":[25,20,22,18],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"line":{"width":3},"mode":"lines+markers","name":"Cosecha","x":[9,10],"y":[30,28],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"marker":{"color":"#32CD32"},"name":"Completadas","x":[1,2,3,4,5,6,7,8,9,10,11,12],"y":[8,12,15,18,25,20,22,18,30,28,10,6],"type":"bar","xaxis":"x2","yaxis":"y2"},
                {"marker":{"color":"#FFD700"},"name":"Iniciadas","opacity":0.7,"x":[1,2,3,4,5,6,7,8,9,10,11,12],"y":[10,15,18,20,25,22,24,20,30,30,12,8],"type":"bar","xaxis":"x2","yaxis":"y2"},
                {"line":{"color":"#4682B4","width":4},"marker":{"size":10},"mode":"lines+markers+text","name":"Costo Promedio","text":[800,750,650,600,550,600,650,700,400,450,800,850],"textposition":"top center","x":[1,2,3,4,5,6,7,8,9,10,11,12],"y":[800,750,650,600,550,600,650,700,400,450,800,850],"type":"scatter","xaxis":"x3","yaxis":"y3"},
                {"labels":["Q1","Q2","Q3","Q4"],"marker":{"colors":["#2E8B57","#CD853F","#4682B4"]},"name":"Trimestral","values":[35,63,70,44],"type":"pie","domain":{"x":[0.55,1.0],"y":[0.0,0.375]}}
            ],
            {
                "xaxis":{"anchor":"y","domain":[0.0,0.45],"title":{"text":"Mes"}},
                "yaxis":{"anchor":"x","domain":[0.625,1.0],"title":{"text":"Tareas Completadas"}},
                "xaxis2":{"anchor":"y2","domain":[0.55,1.0]},
                "yaxis2":{"anchor":"x2","domain":[0.625,1.0]},
                "xaxis3":{"anchor":"y3","domain":[0.0,0.45],"title":{"text":"Mes"}},
                "yaxis3":{"anchor":"x3","domain":[0.0,0.375],"title":{"text":"Costo Promedio ($)"}},
                "annotations":[
                    {"font":{"size":16},"showarrow":false,"text":"Evolución Mensual de Tareas por Tipo","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Estacionalidad: Completadas vs Iniciadas","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Tendencia Costos Promedio por Mes","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Distribución de Actividades por Trimestre","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ],
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"📅 Análisis Temporal Integral - Estacionalidad y Tendencias","x":0.5},
                "height":900,
                "showlegend":true,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    // Chart 6: Operational Analysis
    if (document.getElementById("0a5344f3-6ccb-4a26-8f56-c6b442641c31")) {
        Plotly.newPlot(
            "0a5344f3-6ccb-4a26-8f56-c6b442641c31",
            [
                {"labels":["Completada","En_Progreso","Pendiente"],"marker":{"colors":["#32CD32","#FFD700","#DC143C"]},"name":"Estados","textinfo":"label+percent+value","values":[136,47,17],"type":"pie","domain":{"x":[0.0,0.45],"y":[0.625,1.0]}},
                {"labels":["Media","Alta","Baja"],"marker":{"colors":["#DC143C","#4682B4","#2E8B57"]},"name":"Prioridades","textinfo":"label+percent+value","values":[99,59,42],"type":"pie","domain":{"x":[0.55,1.0],"y":[0.625,1.0]}},
                {"marker":{"color":["#2E8B57","#4682B4","#CD853F","#FFD700"]},"name":"Duración Promedio","text":[8.1,8.0,7.8,8.3],"textposition":"auto","x":["cosecha","mantenimiento","preparacion","siembra"],"y":[8.14,8.02,7.79,8.28],"type":"bar","xaxis":"x","yaxis":"y"},
                {"marker":{"color":"#CD853F"},"name":"Actividad por Día","text":[44,26,35,33,27,25],"textposition":"auto","x":["Miércoles","Sábado","Viernes","Jueves","Lunes","Martes"],"y":[44,26,35,33,27,25],"type":"bar","xaxis":"x2","yaxis":"y2"}
            ],
            {
                "xaxis":{"anchor":"y","domain":[0.0,0.45]},
                "yaxis":{"anchor":"x","domain":[0.0,0.375],"title":{"text":"Horas Promedio"}},
                "xaxis2":{"anchor":"y2","domain":[0.55,1.0]},
                "yaxis2":{"anchor":"x2","domain":[0.0,0.375],"title":{"text":"Número de Tareas"}},
                "annotations":[
                    {"font":{"size":16},"showarrow":false,"text":"Estados de Tareas - Control Operacional","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Distribución de Prioridades","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Duración Promedio por Tipo de Actividad (Horas)","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Análisis Días de la Semana - Productividad","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ],
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"⚙️ Análisis Operacional Integral - Eficiencia y Control","x":0.5},
                "height":900,
                "showlegend":false,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    // Chart 7: Strategic Recommendations
    if (document.getElementById("37a6bc22-f115-4d11-b500-1fab0ec14a8d")) {
        Plotly.newPlot(
            "37a6bc22-f115-4d11-b500-1fab0ec14a8d",
            [
                {"cells":{"align":"center","fill":{"color":"white"},"font":{"size":12},"height":40,"values":[["RECURSOS HUMANOS","FINANCIERO","OPERACIONAL","TERRITORIAL","PRODUCTIVIDAD"],["CRÍTICA","ALTA","MEDIA","ALTA","MEDIA"],["Promover Charlie López a Supervisor","Expandir Campo Sur (Lote B2)","Optimizar proceso COSECHA","Replicar mejores prácticas suelo Franco","Capacitar empleado Ana Torres"],["+5%","+15%","+3%","+8%","+2%"],["0-30 días","3-6 meses","1-3 meses","6-12 meses","1-2 meses"]]},"header":{"align":"center","fill":{"color":"#2E8B57"},"font":{"color":"white","size":14},"values":["🎯 CATEGORÍA","🚨 PRIORIDAD","💡 RECOMENDACIÓN","📊 IMPACTO ROI","⏱️ PLAZO"]},"type":"table"}
            ],
            {
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"💡 Plan de Acción Estratégico - Recomendaciones Priorizadas","x":0.5},
                "height":400,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    // Chart 8: Future Projections
    if (document.getElementById("db60d1f2-ae3a-4025-a54e-9db43dbce761")) {
        Plotly.newPlot(
            "db60d1f2-ae3a-4025-a54e-9db43dbce761",
            [
                {"line":{"color":"#4682B4","width":3},"mode":"lines+markers","name":"Escenario Conservador","x":["Actual","Mar 2025","Jun 2025","Sep 2025","Dic 2025"],"y":[-5.58,-2,5,8,12],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"line":{"color":"#32CD32","width":3},"mode":"lines+markers","name":"Escenario Optimista","x":["Actual","Mar 2025","Jun 2025","Sep 2025","Dic 2025"],"y":[-5.58,0,8,12,18],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"line":{"color":"#DC143C","width":3},"mode":"lines+markers","name":"Escenario Pesimista","x":["Actual","Mar 2025","Jun 2025","Sep 2025","Dic 2025"],"y":[-5.58,-4,-1,2,5],"type":"scatter","xaxis":"x","yaxis":"y"},
                {"marker":{"color":["#DC143C","#32CD32","#32CD32","#32CD32","#32CD32"]},"name":"Torvadas Proyectadas","text":["28.5","35","42","47","52"],"textposition":"auto","x":["Actual","Mar 2025","Jun 2025","Sep 2025","Dic 2025"],"y":[28.5,35,42,47,52],"type":"bar","xaxis":"x2","yaxis":"y2"},
                {"line":{"color":"#2E8B57","width":4},"marker":{"size":12},"mode":"lines+markers+text","name":"Eficiencia %","text":["72.7%","78.0%","84.0%","88.0%","92.0%"],"textposition":"top center","x":["Actual","Mar 2025","Jun 2025","Sep 2025","Dic 2025"],"y":[72.7,78,84,88,92],"type":"scatter","xaxis":"x3","yaxis":"y3"},
                {"marker":{"color":"#FFD700"},"name":"Inversión","x":["Situación Actual","Con Plan Estratégico"],"y":[981,2981],"type":"bar","xaxis":"x4","yaxis":"y4"},
                {"marker":{"color":"#32CD32"},"name":"Ingresos","x":["Situación Actual","Con Plan Estratégico"],"y":[926,4426],"type":"bar","xaxis":"x4","yaxis":"y4"}
            ],
            {
                "xaxis":{"anchor":"y","domain":[0.0,0.45]},
                "yaxis":{"anchor":"x","domain":[0.625,1.0],"title":{"text":"ROI %"}},
                "xaxis2":{"anchor":"y2","domain":[0.55,1.0]},
                "yaxis2":{"anchor":"x2","domain":[0.625,1.0],"title":{"text":"Torvadas"}},
                "xaxis3":{"anchor":"y3","domain":[0.0,0.45]},
                "yaxis3":{"anchor":"x3","domain":[0.0,0.375],"title":{"text":"Eficiencia %"}},
                "xaxis4":{"anchor":"y4","domain":[0.55,1.0]},
                "yaxis4":{"anchor":"x4","domain":[0.0,0.375],"title":{"text":"USD ($)"}},
                "annotations":[
                    {"font":{"size":16},"showarrow":false,"text":"Proyección ROI - Escenarios 2025","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Proyección Productividad (Torvadas)","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Evolución Eficiencia Operacional","x":0.225,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"},
                    {"font":{"size":16},"showarrow":false,"text":"Impacto Financiero Plan Estratégico","x":0.775,"xanchor":"center","xref":"paper","y":0.375,"yanchor":"bottom","yref":"paper"}
                ],
                "title":{"font":{"size":20,"color":"#2E8B57"},"text":"📈 Proyecciones Estratégicas 2025 - Escenarios de Crecimiento","x":0.5},
                "height":900,
                "showlegend":true,
                "paper_bgcolor":"rgba(255,255,255,0.9)"
            },
            {"responsive": true}
        );
    }

    console.log('✅ Todos los gráficos Plotly inicializados correctamente');
}

// Window resize handler
function handleResize() {
    const plotlyDivs = document.querySelectorAll('.plotly-graph-div');
    plotlyDivs.forEach(function(div) {
        if (div.data && div.layout && typeof Plotly !== 'undefined') {
            Plotly.Plots.resize(div);
        }
    });
}

// Initialize everything when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    console.log('🚀 Inicializando Dashboard Sistema Cultivo Arroz...');
    
    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
    
    // Initialize Plotly charts
    initializePlotlyCharts();
    
    // Set up event listeners
    window.addEventListener('scroll', handleScroll);
    window.addEventListener('resize', handleResize);
    
    // Initialize navigation
    updateActiveNavigation();
    
    console.log('✅ Dashboard inicializado correctamente');
});

// MathJax Configuration
if (typeof MathJax !== 'undefined') {
    MathJax.Hub.Config({
        TeX: {
            equationNumbers: {
                autoNumber: "AMS",
                useLabelIds: true
            }
        },
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        displayAlign: 'center',
        messageStyle: 'none',
        CommonHTML: {
            linebreaks: {
                automatic: true
            }
        }
    });
}
</script>

</body>
</html>